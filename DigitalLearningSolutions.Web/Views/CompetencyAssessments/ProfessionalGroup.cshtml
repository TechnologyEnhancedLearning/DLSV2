@using DigitalLearningSolutions.Web.ViewModels.CompetencyAssessments;
@model ProfessionalGroupViewModel;
@{
  ViewData["Title"] = "New Competency Assessments";
  ViewData["Application"] = "Framework Service";
}
<link rel="stylesheet" href="@Url.Content("~/css/frameworks/frameworksShared.css")" asp-append-version="true">
@section NavMenuItems {
  <partial name="~/Views/Frameworks/Shared/_NavMenuItems.cshtml" />
}
  @if ((string)ViewContext.RouteData.Values["actionName"] == "New")
{
  @section NavBreadcrumbs {
  <nav class="nhsuk-breadcrumb" aria-label="Breadcrumb">
    <div class="nhsuk-width-container">
      <ol class="nhsuk-breadcrumb__list">
        <li class="nhsuk-breadcrumb__item"><a class="nhsuk-breadcrumb__link trigger-loader" asp-action="ViewCompetencyAssessments" asp-route-tabname="Mine">Competency Assessments</a></li>
        <li class="nhsuk-breadcrumb__item">Create competency assessment</li>
      </ol>
      <p class="nhsuk-breadcrumb__back"><a class="nhsuk-breadcrumb__backlink" asp-action="ViewCompetencyAssessments" asp-route-tabname="Mine">Back to competency assessments</a></p>
    </div>
  </nav>
  }
}
else
{
  @section NavBreadcrumbs {
  <nav class="nhsuk-breadcrumb" aria-label="Breadcrumb">
    <div class="nhsuk-width-container">
      <ol class="nhsuk-breadcrumb__list">
        <li class="nhsuk-breadcrumb__item"><a class="nhsuk-breadcrumb__link trigger-loader" asp-action="ViewCompetencyAssessments" asp-route-tabname="Mine">Competency Assessments</a></li>
        <li class="nhsuk-breadcrumb__item"><a class="nhsuk-breadcrumb__link trigger-loader" asp-action="ManageCompetencyAssessment" asp-route-competencyAssessmentId="@Model.CompetencyAssessmentBase.ID" asp-route-tabname="Details">Competency Assessment Details</a></li>
        <li class="nhsuk-breadcrumb__item">Name</li>
      </ol>
      <p class="nhsuk-breadcrumb__back"><a class="nhsuk-breadcrumb__backlink" asp-action="ManageCompetencyAssessment" asp-route-competencyAssessmentId="@Model.CompetencyAssessmentBase.ID" asp-route-tabname="Details">Back to competency assessment detail</a></p>
    </div>
  </nav>
  }
}
<h1>National job profile - professional group</h1>
<form method="post">
  @if (!ViewData.ModelState.IsValid)
  {
    <partial name="_ErrorSummary" />
  }
  <nhs-form-group nhs-validation-for="CompetencyAssessmentBase.NRPProfessionalGroupID">
    <label class="nhsuk-label" for="framework-name-hint">
      <h2>Which professional group does this competency assessment match to?</h2>
    </label>
    <span nhs-validation-for="CompetencyAssessmentBase.NRPProfessionalGroupID"></span>
    <div class="nhsuk-radios nhsuk-u-margin-bottom-3 nhsuk-u-margin-top-3">
      @foreach (var professionalGroup in Model.NRPProfessionalGroups)
      {
        <div class="nhsuk-radios__item">
          <input class="nhsuk-radios__input" name="CompetencyAssessmentBase.NRPProfessionalGroupID" id="radio-@professionalGroup.ID" checked="@(Model.CompetencyAssessmentBase.NRPProfessionalGroupID == professionalGroup.ID)" type="radio" value="@professionalGroup.ID">
          <label class="nhsuk-label nhsuk-radios__label" for="radio-@professionalGroup.ID">
            @professionalGroup.ProfessionalGroup
          </label>
        </div>
      }
      <hr />

      <div class="nhsuk-radios__item">
        <input class="nhsuk-radios__input" name="CompetencyAssessmentBase.NRPProfessionalGroupID" id="radio-null" checked="@(Model.CompetencyAssessmentBase.NRPProfessionalGroupID == null)" type="radio" value="">
        <text class="nhsuk-label nhsuk-radios__label" for="radio-null">
            @if ((string)ViewContext.RouteData.Values["actionName"] == "New")
            {
              <text>
              Skip professional group and job role linking.
              </text>


            }
            else
            {
              <text>
              Don't link to professional group and job role.
              </text>

            }
          </label>
      </div>

    </div>
  </nhs-form-group>
  <input name="ID" type="hidden" asp-for="CompetencyAssessmentBase.ID" />
  <input name="ID" type="hidden" asp-for="CompetencyAssessmentBase.CompetencyAssessmentName" />
  <input name="Description" type="hidden" asp-for="CompetencyAssessmentBase.Description" />
  <input name="brandId" type="hidden" asp-for="CompetencyAssessmentBase.BrandID" />
  <input name="ownerAdminId" type="hidden" asp-for="CompetencyAssessmentBase.OwnerAdminID" />
  <input name="parentCompetencyAssessmentID" type="hidden" asp-for="CompetencyAssessmentBase.ParentCompetencyAssessmentID" />
  <input name="publishStatusId" type="hidden" asp-for="CompetencyAssessmentBase.PublishStatusID" />
  <input name="national" type="hidden" asp-for="CompetencyAssessmentBase.National" />
  <input name="public" type="hidden" asp-for="CompetencyAssessmentBase.Public" />
  <input name="publishStatusId" type="hidden" asp-for="CompetencyAssessmentBase.PublishStatusID" />
  <input name="nrpSubGroupID" type="hidden" asp-for="CompetencyAssessmentBase.NRPSubGroupID" />
  <input name="nrpRoleID" type="hidden" asp-for="CompetencyAssessmentBase.NRPRoleID" />
  <input name="userRole" type="hidden" asp-for="CompetencyAssessmentBase.UserRole" />
  @if ((string)ViewContext.RouteData.Values["actionName"] == "New")
  {
    <a class="nhsuk-button nhsuk-button--secondary" role="button" asp-action="CompetencyAssessmentName" asp-route-actionName="@(ViewContext.RouteData.Values["actionName"])">
      Back
    </a>
    <button class="nhsuk-button" type="submit">
      Next
    </button>
    <div class="nhsuk-back-link">
      <a class="nhsuk-back-link__link" asp-action="ViewCompetencyAssessments" asp-route-tabname="Mine">
        <svg class="nhsuk-icon nhsuk-icon__chevron-left" focusable='false' xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
          <path d="M13.41 12l5.3-5.29a1 1 0 1 0-1.42-1.42L12 10.59l-5.29-5.3a1 1 0 0 0-1.42 1.42l5.3 5.29-5.3 5.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l5.29-5.3 5.29 5.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"></path>
        </svg>
        Cancel
      </a>
    </div>
  }
  else
  {
    @if (Model.CompetencyAssessmentBase.PublishStatusID == 3)
    {
      <partial name="Shared/_PublishedWarning" />
    }
    <button class="nhsuk-button" type="submit">
      Save
    </button>
    <div class="nhsuk-back-link">
      <a class="nhsuk-back-link__link" asp-action="ManageCompetencyAssessment" asp-route-frameworkId="@Model.CompetencyAssessmentBase.ID" asp-route-tabname="Details">
        <svg class="nhsuk-icon nhsuk-icon__chevron-left" focusable='false' xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
          <path d="M13.41 12l5.3-5.29a1 1 0 1 0-1.42-1.42L12 10.59l-5.29-5.3a1 1 0 0 0-1.42 1.42l5.3 5.29-5.3 5.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l5.29-5.3 5.29 5.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"></path>
        </svg>
        Cancel
      </a>
    </div>
  }

</form>
