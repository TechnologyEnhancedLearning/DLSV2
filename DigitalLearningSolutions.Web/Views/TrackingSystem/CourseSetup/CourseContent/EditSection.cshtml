@inject IConfiguration Configuration
@using DigitalLearningSolutions.Web.Controllers.TrackingSystem.CourseSetup
@using DigitalLearningSolutions.Web.Models.Enums
@using DigitalLearningSolutions.Web.ViewModels.TrackingSystem.CourseSetup.CourseContent
@using Microsoft.Extensions.Configuration
@model EditCourseSectionViewModel

<link rel="stylesheet" href="@Url.Content("~/css/trackingSystem/courseContent.css")" asp-append-version="true">

@{
  ViewData["Title"] = "Edit section content";
  ViewData["Application"] = DlsSubApplication.TrackingSystem.HeaderExtension;
  ViewData["HeaderPath"] = DlsSubApplication.TrackingSystem.HeaderPath;
  ViewData["HeaderPathName"] = DlsSubApplication.TrackingSystem.HeaderPathName;
  var cancelRouteData = new Dictionary<string, string> { { "customisationId", Model.CustomisationId.ToString() } };
}

@section NavMenuItems {
  <partial name="_AutoNavMenuItems" model="DlsSubApplication.TrackingSystem"/>
}

<div class="nhsuk-grid-row">
  <div class="nhsuk-grid-column-full">

    <h1 class="nhsuk-heading-xl">Edit section content</h1>

    <div class="nhsuk-card">
      <div class="nhsuk-card__content basic-card-content">
        <dl class="nhsuk-summary-list">
          <div class="nhsuk-summary-list__row basic-summary-list__row">
            <dt class="nhsuk-summary-list__key">
              Course
            </dt>
            <partial name="_SummaryFieldValue" model="@Model.CourseName" />
          </div>
          <div class="nhsuk-summary-list__row basic-summary-list__row">
            <dt class="nhsuk-summary-list__key">
              Section
            </dt>
            <partial name="_SummaryFieldValue" model="@Model.SectionName" />
          </div>
        </dl>
      </div>
    </div>

    <form class="nhsuk-u-margin-bottom-3" method="post" asp-action="EditSection">
      <div class="hidden-submit">
        <button name="action" class="nhsuk-button" value="@CourseContentController.SaveAction" aria-hidden="true" tabindex="-1">Save</button>
      </div>
      <input type="hidden" asp-for="CourseName" />
      <input type="hidden" asp-for="SectionName" />

      <div class="nhsuk-grid-row  nhsuk-u-margin-bottom-4">
        <partial name="_EditSectionDiagnostic" model="Model"/>

        <partial name="_EditSectionLearning" model="Model"/>
      </div>

      <button name="action" class="nhsuk-button" type="submit" value="@CourseContentController.SaveAction">Save</button>
    </form>

    <vc:cancel-link asp-controller="CourseContent" asp-action="Index" asp-all-route-data="@cancelRouteData" />

  </div>
</div>

@section scripts {
  <script src="@Url.Content("~/js/trackingSystem/editCourseContent.js")" asp-append-version="true"></script>
}
