@using DigitalLearningSolutions.Web.Controllers.TrackingSystem.CourseSetup
@using DigitalLearningSolutions.Web.ViewModels.TrackingSystem.CourseSetup.CourseContent
@model EditCourseSectionFormData

@{
  var selectAllAction = Model is EditCourseSectionViewModel ?
    CourseContentController.SelectAllLearningAction : CourseSetupController.SelectAllLearningAction;
  var deselectAllAction = Model is EditCourseSectionViewModel ?
    CourseContentController.DeselectAllLearningAction : CourseSetupController.DeselectAllLearningAction;
}

<div class="nhsuk-grid-column-one-half tutorial-learning-column">
  <h2 class="nhsuk-heading-l nhsuk-u-margin-bottom-1">Learning</h2>
  <p class="nhsuk-body-m nhsuk-u-margin-bottom-1">Select all tutorials that should have learning enabled.</p>

  <div class="nhsuk-grid-row nhsuk-u-margin-bottom-3">
    <div class="nhsuk-grid-column-full">
      <button name="action"
              class="nhsuk-search__submit select-all-button"
              value="@selectAllAction">
        Select all
      </button>
      <button name="action"
              class="nhsuk-search__submit deselect-all-button"
              value="@deselectAllAction">
        Deselect all
      </button>
    </div>
  </div>

  <div class="nhsuk-checkboxes">
    @foreach (var (tutorial, tutIndex) in Model.Tutorials.Select((t, i) => (t, i)))
    {
      <div class="nhsuk-checkboxes__item">
        <input class="nhsuk-checkboxes__input learning-checkbox"
               type="checkbox"
               name="@($"{nameof(Model.Tutorials)}[{tutIndex}].{nameof(tutorial.LearningEnabled)}")"
               id="learning-enabled-@tutorial.TutorialId"
               checked="@tutorial.LearningEnabled"
               value="true" />
        <label class="nhsuk-label nhsuk-checkboxes__label word-break" for="learning-enabled-@tutorial.TutorialId">
          @tutorial.TutorialName
        </label>
      </div>
    }
  </div>
</div>
