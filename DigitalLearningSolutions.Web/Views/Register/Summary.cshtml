@using DigitalLearningSolutions.Web.ViewModels.Register
@model SummaryViewModel
@{
  var errorHasOccurred = !ViewData.ModelState.IsValid;
  ViewData["Title"] = errorHasOccurred ? "Error: Register - Summary" : "Register - Summary";
  var termsError = ViewData.ModelState["Terms"]?.Errors?.Count > 0;
  var termsFormErrorClass = termsError ? "nhsuk-form-group--error" : "";
}

<div class="nhsuk-grid-row">
  <div class="nhsuk-grid-column-full">
    @if (errorHasOccurred) {
      <partial name="_ErrorSummary"/>
    }

    <div class="nhsuk-u-margin-bottom-8">
      <h1 id="page-heading" class="nhsuk-heading-xl">Summary</h1>
    </div>

    <dl class="nhsuk-summary-list">
      <div class="nhsuk-summary-list__row">
        <dt class="nhsuk-summary-list__key">
          Centre
        </dt>
        <dd class="nhsuk-summary-list__value">
          @Model.Centre
        </dd>
        <dd class="nhsuk-summary-list__actions">
          <a class="nhsuk-link" asp-action="Index">
            Change<span class="nhsuk-u-visually-hidden"> centre</span>
          </a>
        </dd>
      </div>
      <div class="nhsuk-summary-list__row">
        <dt class="nhsuk-summary-list__key">
          First name
        </dt>
        <dd class="nhsuk-summary-list__value">
          @Model.FirstName
        </dd>
        <dd class="nhsuk-summary-list__actions">
          <a class="nhsuk-link" asp-action="Index">
            Change<span class="nhsuk-u-visually-hidden"> first name</span>
          </a>
        </dd>
      </div>
      <div class="nhsuk-summary-list__row">
        <dt class="nhsuk-summary-list__key">
          Last name
        </dt>
        <dd class="nhsuk-summary-list__value">
          @Model.LastName
        </dd>
        <dd class="nhsuk-summary-list__actions">
          <a class="nhsuk-link" asp-action="Index">
            Change<span class="nhsuk-u-visually-hidden"> last name</span>
          </a>
        </dd>
      </div>
      <div class="nhsuk-summary-list__row">
        <dt class="nhsuk-summary-list__key">
          Email
        </dt>
        <dd class="nhsuk-summary-list__value">
          @Model.Email
        </dd>
        <dd class="nhsuk-summary-list__actions">
          <a class="nhsuk-link" asp-action="Index">
            Change<span class="nhsuk-u-visually-hidden"> email address</span>
          </a>
        </dd>
      </div>
      <div class="nhsuk-summary-list__row">
        <dt class="nhsuk-summary-list__key">
          Job group
        </dt>
        <dd class="nhsuk-summary-list__value">
          @Model.JobGroup
        </dd>
        <dd class="nhsuk-summary-list__actions">
          <a class="nhsuk-link" asp-action="LearnerInformation">
            Change<span class="nhsuk-u-visually-hidden"> job group</span>
          </a>
        </dd>
      </div>
    </dl>

    <form method="post" asp-action="Summary">
      <div class="nhsuk-form-group @termsFormErrorClass">
        <fieldset class="nhsuk-fieldset" aria-describedby="terms-error">
          @if (termsError) {
            <span class="nhsuk-error-message" id="terms-error">
              <span class="nhsuk-u-visually-hidden">Error:</span> @ViewData.ModelState["Terms"].Errors[0].ErrorMessage
            </span>
          }
          <div class="nhsuk-checkboxes">
            <div class="nhsuk-checkboxes__item">
              <input class="nhsuk-checkboxes__input" id="terms" name="terms" asp-for="Terms"/>
              <label class="nhsuk-label nhsuk-checkboxes__label" for="terms">
                I have read, understood and agree to abide by the Digital Learning Solutions <a asp-controller="LearningSolutions" asp-action="Terms" target="_blank">Terms and Conditions</a>.
              </label>
            </div>
          </div>
        </fieldset>
      </div>

      <button class="nhsuk-button" type="submit">Register</button>
    </form>
  </div>
</div>

