@using DigitalLearningSolutions.Web.ViewModels.LearningPortal.Current
@model CurrentCourseViewModel

<div class="searchable-element nhsuk-panel @Model.DateStyle()" id="@Model.Id-course-card">
    <details class="nhsuk-details nhsuk-expander nhsuk-u-margin-bottom-0">
        <summary class="nhsuk-details__summary nhsuk-u-padding-top-0 nhsuk-u-padding-left-0">
            <span class="nhsuk-u-visually-hidden">@Model.DueByDescription()</span>
            <span class="nhsuk-details__summary-text searchable-element-title"
                  id="@Model.Id-name-course"
                  role="heading"
                  aria-level="2">
                @Model.Name
            </span>
        </summary>
        <div class="nhsuk-details__text nhsuk-u-padding-left-0">
            <div class="nhsuk-u-padding-left-3">
                <div class="nhsuk-grid-row">
                    <partial name="Shared/_TagRow" model="@Model" />
                </div>
                <dl class="nhsuk-summary-list">
                    <partial name="Shared/_Dates" model="@Model" />
                    <partial name="Shared/_Scores" model="@Model" />
                </dl>
                <partial name="Current/CurrentCourseCard/_Unlock" model="@Model" />
            </div>
            @if (Model.SelfEnrolled)
            {
                <a class="nhsuk-button delete-button small-edit-button"
               aria-describedby="@Model.Id-name-course"
               data-return-page-enabled="true"
               asp-action="RemoveCurrentCourseConfirmation"
               asp-route-id="@Model.Id"
               asp-route-returnPageQuery="@Model.ReturnPageQuery"
               role="button">
                    Remove course
                </a>
            }
        </div>
    </details>

    <div class="nhsuk-grid-row">
        <div class="nhsuk-grid-column-full">
            <a class="nhsuk-button nhsuk-u-margin-bottom-2 nhsuk-u-margin-top-0"
               aria-describedby="@Model.Id-name-course"
               asp-controller="LearningMenu"
               asp-action="Index"
               asp-route-customisationId="@Model.Id"
               role="button">
                Launch course
            </a>
        </div>
    </div>
</div>
