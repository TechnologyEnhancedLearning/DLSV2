@inject IConfiguration Configuration
@using DigitalLearningSolutions.Web.ViewModels.LearningPortal.Available
@using Microsoft.Extensions.Configuration
@model AvailablePageViewModel

<link rel="stylesheet" href="@Url.Content("~/css/learningPortal/courses.css")" asp-append-version="true">

@{
  ViewData["Application"] = "Learning Portal";
  ViewData["Title"] = "Learning Portal - Available";
  ViewData["HeaderPath"] = $"{Configuration["AppRootPath"]}/LearningPortal/Current";
  ViewData["HeaderPathName"] = "My Current Activities";
}

@section NavMenuItems {
  <partial name="Shared/_NavMenuItems" />
}

@if (Model.JavascriptSearchSortFilterPaginateEnabled) {
  <vc:loading-spinner page-has-side-nav-menu="false" />
}
<div class="nhsuk-grid-row" id="@(Model.JavascriptSearchSortFilterPaginateEnabled ? "area-to-hide-while-loading" : "no-js-styling")">
  <div class="nhsuk-grid-column-full">
    <h1 id="page-heading">Available Activities</h1>
    @if (Model.BannerText != null) {
      <h2 class="page-subheading">@Model.BannerText</h2>
    }

    <partial name="SearchablePage/Configurations/_FullWidthSearchSortAndFilter" model="Model" />

    <hr class="nhsuk-u-margin-top-3 nhsuk-u-margin-bottom-4" />
    @if (Model.NoDataFound) {
      <p class="nhsuk-u-margin-top-4" role="alert">
        <b>No data to display</b>
      </p>
    } else {
      <partial name="SearchablePage/_SearchResultsCount" model="Model" />

      <div id="searchable-elements">
        @foreach (var availableCourse in Model.AvailableCourses) {
          <partial name="Available/_AvailableCourseCard" model="availableCourse" />
        }
      </div>
    }
    @if (Model.TotalPages > 1) {
      <partial name="SearchablePage/_Pagination" model="Model" />
    }
  </div>
</div>

@if (Model.JavascriptSearchSortFilterPaginateEnabled) {
  @section scripts {
    <script src="@Url.Content("~/js/learningPortal/available.js")" asp-append-version="true"></script>
  }
}
