@using DigitalLearningSolutions.Web.ViewModels.Frameworks;
@model PublishViewModel;
@{
  ViewData["Title"] = Model.FrameworkName;
  ViewData["Application"] = "Framework Service";
}
@section NavBreadcrumbs {
  <nav class="nhsuk-breadcrumb" aria-label="Breadcrumb">
    <div class="nhsuk-width-container">
      <ol class="nhsuk-breadcrumb__list">
        <li class="nhsuk-breadcrumb__item"><a class="nhsuk-breadcrumb__link trigger-loader" asp-action="FrameworksDashboard">Frameworks</a></li>
        <li class="nhsuk-breadcrumb__item"><a class="nhsuk-breadcrumb__link trigger-loader" asp-action="ViewFramework" asp-route-frameworkId="@Model.FrameworkId" asp-route-tabname="Structure">Framework Structure</a></li>
        <li class="nhsuk-breadcrumb__item">Publish</li>
      </ol>
      <p class="nhsuk-breadcrumb__back"><a class="nhsuk-breadcrumb__backlink" asp-action="ViewFramework" asp-route-frameworkId="@Model.FrameworkId" asp-route-tabname="Structure">Back to framework structure</a></p>
    </div>
  </nav>
}
<h1>Publish framework</h1>
@if (Model.FrameworkReviews.Any())
{
  <table role="table" class="nhsuk-table-responsive">
    <caption class="nhsuk-table__caption">Framework review status</caption>
    <thead role="rowgroup" class="nhsuk-table__head">
      <tr role="row">
        <th role="columnheader" class="" scope="col">
        Reviewer
        </th>
        <th role="columnheader" class="" scope="col">
          Requested
        </th>
        <th role="columnheader" class="" scope="col">
          Status
        </th>
      </tr>
    </thead>
    <tbody class="nhsuk-table__body">
      @foreach (var review in Model.FrameworkReviews)
      {
        <tr role="row" class="nhsuk-table__row">
          <td role="cell" class="nhsuk-table__cell">
            <span class="nhsuk-table-responsive__heading">Reviewer </span>@review.UserEmail
            @if (review.SignOffRequired)
            {
              <strong class="nhsuk-tag nhsuk-tag--blue role-tag">
               Sign-off Required
              </strong>
            }
          </td>
          <td role="cell" class="nhsuk-table__cell">
            <span class="nhsuk-table-responsive__heading">Requested </span>@review.ReviewRequested.ToShortDateString()
          </td>
          <td role="cell" class="nhsuk-table__cell">
            <span class="nhsuk-table-responsive__heading">Status </span>@(review.ReviewComplete == null? "Pending": (review.SignedOff ? "Signed off" : "Revisions required"))
          </td>
        </tr>
      }
    </tbody>
  </table>
}
<div class="nhsuk-grid-row nhsuk-u-margin-top-3">
  <div class="nhsuk-grid-column-full">
    <a role="button" asp-action="SendForReview" asp-route-frameworkId="@Model.FrameworkId" class="nhsuk-button nhsuk-button--secondary">Invite more reviewers</a>
  </div>
</div>

