@using DigitalLearningSolutions.Web.ViewModels.Frameworks
@model SimilarCompetencyViewModel
@{
    ViewData["Title"] = "Similar Competency";
    ViewData["Application"] = "Framework Service";
    ViewData["HeaderPathName"] = "Framework Service";
}

@section NavMenuItems {
<partial name="Shared/_NavMenuItems" />
}
<h1>Create a new Competency</h1>
<div class="nhsuk-form-group nhsuk-form-group--error">
    <h2>Duplicate framework competency name</h2>
    <p class="nhsuk-error-message">
        Your framework competeny <span class="nhsuk-u-font-weight-bold">@Model.Competency.Name</span> has the same name as an existing framework:
    </p>
</div>
<p class="nhsuk-u-margin-top-6">
    Your competency is name is not distinct, you can still create it but we recommand you to take a distinct name.
</p>
<h2>Duplications</h2>
<table role="table" class="nhsuk-table-responsive nhsuk-u-margin-bottom-6">
    <caption class="nhsuk-table__caption nhsuk-u-visually-hidden">
        Competency
    </caption>
    <thead role="rowgroup" class="nhsuk-table__head">
        <tr role="row">
            <th role="columnheader" class="" scope="col">
                Name
            </th>
            <th role="columnheader" class="" scope="col">
                Description
            </th>
        </tr>
    </thead>
    <tbody class="nhsuk-table__body">
        @foreach (var competency in Model.SameCompetency)
        {
            <tr role="row" class="nhsuk-table__row framework-row">
                <td role="cell" class="nhsuk-table__cell nhsuk-u-font-size-16">
                    <span class="nhsuk-table-responsive__heading">Framework </span>
                    <span class="framework-brand">
                        @competency.Name
                    </span>
                </td>
                <td role="cell" class="nhsuk-table__cell nhsuk-u-font-size-16">
                    <span class="nhsuk-table-responsive__heading">Created </span>
                    <span class="framework-created-date">
                        @Html.Raw(competency.Description)
                    </span>
                </td>
            </tr>
        }
    </tbody>
</table>
<form asp-action="AddDuplicateCompetency" asp-route-frameworkId="@Model.FrameworkId"
      asp-route-competencyName="@Model.Competency.Name" asp-route-competencyDescription="@Model.Competency.Description"
      asp-route-frameworkCompetencyId="@Model.FrameworkCompetencyId" asp-route-frameworkGroupId="@Model.FrameworkGroupId">
    <button class="nhsuk-button" type="submit">
        Save competency
    </button>
</form>
<a class="nhsuk-button nhsuk-button--secondary" role="button" asp-action="ViewFramework" asp-route-tabname="Structure" asp-route-frameworkId="@Model.FrameworkId">
    Cancel
</a>
