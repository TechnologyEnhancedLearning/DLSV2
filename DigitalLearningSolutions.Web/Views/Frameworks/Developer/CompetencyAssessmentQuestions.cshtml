@using DigitalLearningSolutions.Web.ViewModels.Frameworks
@model CompetencyAssessmentQuestionsViewModel;
@{
  ViewData["Title"] = "Competency Assessment Questions";
  ViewData["Application"] = "Framework Service";
}
<link rel="stylesheet" href="@Url.Content("~/css/frameworks/frameworksShared.css")" asp-append-version="true">
@section NavMenuItems {
  <partial name="Shared/_NavMenuItems" />
}
@section NavBreadcrumbs {
  <nav class="nhsuk-breadcrumb" aria-label="Breadcrumb">
    <div class="nhsuk-width-container">
      <ol class="nhsuk-breadcrumb__list">
        <li class="nhsuk-breadcrumb__item"><a class="nhsuk-breadcrumb__link trigger-loader" asp-action="FrameworksDashboard">Frameworks</a></li>
        <li class="nhsuk-breadcrumb__item"><a class="nhsuk-breadcrumb__link trigger-loader" asp-action="ViewFramework" asp-fragment="fc-@Model.FrameworkCompetencyId" asp-route-frameworkId="@Model.FrameworkId" asp-route-tabname="Structure">Framework Structure</a></li>
        <li class="nhsuk-breadcrumb__item">Competency Assessment Questions</li>
      </ol>
      <p class="nhsuk-breadcrumb__back"><a class="nhsuk-breadcrumb__backlink" asp-action="ViewFramework" asp-fragment="fc-@Model.FrameworkCompetencyId" asp-route-frameworkId="@Model.FrameworkId" asp-route-tabname="Structure">Back to Framework Structure</a></p>
    </div>
  </nav>
}
<h1>Competency assessment questions</h1>
<p class="nhsuk-body-l">Assessment questions listed here will be presented to users assessing themselves against this competency.</p>
<div class="nhsuk-table__panel-with-heading-tab">
  <h2 class="nhsuk-table__heading-tab">Assessment questions for competency</h2>

  @if (Model.AssessmentQuestions.Any())
  {
    <table role="presentation" class="nhsuk-table-responsive">
      <thead role="rowgroup" class="nhsuk-table__head">
        <tr role="row">
          <th role="columnheader" class="" scope="col">
            Question
          </th>
          <th role="columnheader" class="" scope="col">
            Input type/Range
          </th>
          <th role="columnheader" class="" scope="col">
            Actions
          </th>
        </tr>
      </thead>

      <tbody class="nhsuk-table__body">
        @foreach (var question in Model.AssessmentQuestions)
        {
          <tr role="row" class="nhsuk-table__row collaborator-row">
            <td role="cell" class="nhsuk-table__cell nhsuk-u-font-size-16">
              <span class="nhsuk-table-responsive__heading">Question </span>
              <span class="framework-collaborator-user">
                @question.Question
              </span>
            </td>
            <td role="cell" class="nhsuk-table__cell nhsuk-u-font-size-16">
              <span class="nhsuk-table-responsive__heading">Input type/Range </span>
              <span class="framework-collaborator-role">
                @question.InputTypeName (@question.MinValue - @question.MaxValue)
              </span>
            </td>
            <td role="cell" class="nhsuk-table__cell nhsuk-u-font-size-16">
              <span class="nhsuk-table-responsive__heading">Actions </span>
              <a title="Remove question from competency" asp-action="RemoveCompetencyAssessmentQuestion" asp-route-frameworkId="@Model.FrameworkId" asp-route-frameworkCompetencyId="@Model.FrameworkCompetencyId" asp-route-assessmentQuestionId="@question.ID">
                Remove
              </a>
              @if (question.UserIsOwner)
              {
                <span>&nbsp;</span>
                <a asp-action="EditAssessmentQuestion" asp-route-assessmentQuestionId="@question.ID" asp-route-frameworkId="@Model.FrameworkId" asp-route-source="CompetencyAssessmentQuestions" asp-route-actionname="@(ViewContext.RouteData.Values["actionname"])">
                  Edit
                </a>
              }
            </td>
          </tr>
        }
      </tbody>
    </table>
  }
  else
  {
    <p>No assessment questions have been added to this competency.</p>
  }
</div>

<form method="post">
  <label class="nhsuk-label nhsuk-u-margin-top-6" for="add-user-hint">
    <h3>Add a question</h3>
  </label>
  <div class="nhsuk-hint" id="add-user-hint">
    Choose a question to add to the competency
  </div>
  <select class="nhsuk-select" asp-items="Model.QuestionSelectList" asp-for="assessmentQuestionId" aria-label="Question"></select>
    <button class="nhsuk-button button-small" asp-route-addToExisting="False" asp-route-frameworkId="@Model.FrameworkId">
      Add
    </button>
</form>
<div class=" nhsuk-u-margin-top-6">
  <a class="nhsuk-button" asp-action="ViewFramework" asp-fragment="fc-@Model.FrameworkCompetencyId" asp-route-frameworkId="@Model.FrameworkId" asp-route-tabname="Structure">
    Done
  </a>
</div>
