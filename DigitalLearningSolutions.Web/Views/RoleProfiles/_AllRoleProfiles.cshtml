@using DigitalLearningSolutions.Web.ViewModels.RoleProfiles
@model AllRoleProfilesViewModel
<h1>All Role Profiles</h1>
@if (!Model.RoleProfiles.Any() && Model.SearchString == null)
{
  <p class="nhsuk-u-margin-top-4" role="alert">
    <b>There are no role profiles in the system.</b>
  </p>
}
else
{
<form method="get" role="search" asp-action="FrameworksViewAll" asp-route-page="@Model.Page">
  <div class="nhsuk-grid-row sort-and-search">
    <partial name="Shared/_PageSearch" model="Model" />
    <partial name="Shared/_PageSort" model="Model" />
  </div>
  <hr class="nhsuk-u-margin-top-3 nhsuk-u-margin-bottom-4" />
  <partial name="Shared/_SearchResultsCount" model="Model" />
  <table role="table" class="nhsuk-table-responsive">
    <caption class="nhsuk-table__caption nhsuk-u-visually-hidden">
      Frameworks
    </caption>
    <thead role="rowgroup" class="nhsuk-table__head">
      <tr role="row">
        <th role="columnheader" class="" scope="col">
          Role Profile
        </th>
        <th role="columnheader" class="" scope="col">
          National Job Profile Linkage
        </th>
        <th role="columnheader" class="" scope="col">
          Created
        </th>
        <th role="columnheader" class="" scope="col">
          Status
        </th>
        <th role="columnheader" class="" scope="col">
          Owner
        </th>
        <th role="columnheader" class="" scope="col">
          Actions
        </th>
      </tr>
    </thead>
    <tbody class="nhsuk-table__body">
      @foreach (var roleProfile in Model.RoleProfiles)
      {
        <tr role="row" class="nhsuk-table__row framework-row">
          <td role="cell" class="nhsuk-table__cell nhsuk-u-font-size-16">
            <span class="nhsuk-table-responsive__heading">Role Profile </span>
            <span class="roleprofile-brand">
              @roleProfile.Brand
            </span>
            <span>/</span>
            <span class="framework-name nhsuk-u-font-weight-bold">
              @roleProfile.RoleProfileName
            </span>
          </td>
          <td role="cell" class="nhsuk-table__cell nhsuk-u-font-size-16">
            <span class="nhsuk-table-responsive__heading">National Job Profile Linkage </span>
            <span class="roleprofile-linkage">
              @roleProfile.NRPProfessionalGroup
              @(roleProfile.NRPSubGroupID != null ? " / " + roleProfile.NRPSubGroup : "")
              @(roleProfile.NRPRoleID != null ? " / " + roleProfile.NRPRole : "")
            </span>
          </td>
          <td role="cell" class="nhsuk-table__cell nhsuk-u-font-size-16">
            <span class="nhsuk-table-responsive__heading">Created </span>
            <span class="roleprofile-created-date">
              @roleProfile.CreatedDate.ToShortDateString()
            </span>
          </td>
          <td role="cell" class="nhsuk-table__cell nhsuk-u-font-size-16">
            <span class="nhsuk-table-responsive__heading">Status </span>
            <span class="roleprofile-publish-status">
              <partial name="~/Views/Frameworks/Shared/_StatusTag.cshtml" model="roleProfile.PublishStatusID" />
            </span>
          </td>
          <td role="cell" class="nhsuk-table__cell nhsuk-u-font-size-16">
            <span class="nhsuk-table-responsive__heading">Owner </span>
            <span class="roleprofile-owner">
              @roleProfile.Owner
            </span>
          </td>
          <td role="cell" class="nhsuk-table__cell nhsuk-u-font-size-16">
            <span class="nhsuk-table-responsive__heading">Actions </span>
            @if (roleProfile.UserRole > 1)
            {
              <a asp-action="ViewRoleProfile" asp-route-frameworkId="@roleProfile.ID" asp-route-tabname="Structure">
                View/Edit
              </a>
            }
            else
            {
              <a asp-action="ViewRoleProfile" asp-route-frameworkId="@roleProfile.ID" asp-route-tabname="Structure">
                View
              </a>
            }
          </td>
        </tr>
      }
    </tbody>
  </table>

  @if (Model.TotalPages > 1)
  {
    <partial name="Shared/_Pagination" model="Model" />
  }
</form>
}
